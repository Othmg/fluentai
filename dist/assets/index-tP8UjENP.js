import{r as P,a as Un,X as Hn,L as Vn,U as Wn,M as Jn,G as qn,B as Xn,b as Gn,C as Kn,c as zn}from"./vendor-DbjL8P6I.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();var Es={exports:{}},et={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qn=P,Zn=Symbol.for("react.element"),Yn=Symbol.for("react.fragment"),er=Object.prototype.hasOwnProperty,tr=Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sr={key:!0,ref:!0,__self:!0,__source:!0};function Ps(n,e,t){var s,r={},a=null,i=null;t!==void 0&&(a=""+t),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(i=e.ref);for(s in e)er.call(e,s)&&!sr.hasOwnProperty(s)&&(r[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:Zn,type:n,key:a,ref:i,props:r,_owner:tr.current}}et.Fragment=Yn;et.jsx=Ps;et.jsxs=Ps;Es.exports=et;var l=Es.exports,Rs,rs=Un;Rs=rs.createRoot,rs.hydrateRoot;const bt="RFC3986",xt={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:n=>String(n)},nr="RFC1738",rr=Array.isArray,Z=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),ut=1024,ar=(n,e,t,s,r)=>{if(n.length===0)return n;let a=n;if(typeof n=="symbol"?a=Symbol.prototype.toString.call(n):typeof n!="string"&&(a=String(n)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let i="";for(let o=0;o<a.length;o+=ut){const u=a.length>=ut?a.slice(o,o+ut):a,d=[];for(let y=0;y<u.length;++y){let c=u.charCodeAt(y);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||r===nr&&(c===40||c===41)){d[d.length]=u.charAt(y);continue}if(c<128){d[d.length]=Z[c];continue}if(c<2048){d[d.length]=Z[192|c>>6]+Z[128|c&63];continue}if(c<55296||c>=57344){d[d.length]=Z[224|c>>12]+Z[128|c>>6&63]+Z[128|c&63];continue}y+=1,c=65536+((c&1023)<<10|u.charCodeAt(y)&1023),d[d.length]=Z[240|c>>18]+Z[128|c>>12&63]+Z[128|c>>6&63]+Z[128|c&63]}i+=d.join("")}return i};function ir(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function as(n,e){if(rr(n)){const t=[];for(let s=0;s<n.length;s+=1)t.push(e(n[s]));return t}return e(n)}const or=Object.prototype.hasOwnProperty,Ns={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},Y=Array.isArray,lr=Array.prototype.push,Is=function(n,e){lr.apply(n,Y(e)?e:[e])},cr=Date.prototype.toISOString,O={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:ar,encodeValuesOnly:!1,format:bt,formatter:xt[bt],indices:!1,serializeDate(n){return cr.call(n)},skipNulls:!1,strictNullHandling:!1};function ur(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const dt={};function Os(n,e,t,s,r,a,i,o,u,d,y,c,f,h,w,m,S,A){let g=n,j=A,E=0,F=!1;for(;(j=j.get(dt))!==void 0&&!F;){const R=j.get(n);if(E+=1,typeof R<"u"){if(R===E)throw new RangeError("Cyclic object value");F=!0}typeof j.get(dt)>"u"&&(E=0)}if(typeof d=="function"?g=d(e,g):g instanceof Date?g=f?.(g):t==="comma"&&Y(g)&&(g=as(g,function(R){return R instanceof Date?f?.(R):R})),g===null){if(a)return u&&!m?u(e,O.encoder,S,"key",h):e;g=""}if(ur(g)||ir(g)){if(u){const R=m?e:u(e,O.encoder,S,"key",h);return[w?.(R)+"="+w?.(u(g,O.encoder,S,"value",h))]}return[w?.(e)+"="+w?.(String(g))]}const D=[];if(typeof g>"u")return D;let B;if(t==="comma"&&Y(g))m&&u&&(g=as(g,u)),B=[{value:g.length>0?g.join(",")||null:void 0}];else if(Y(d))B=d;else{const R=Object.keys(g);B=y?R.sort(y):R}const T=o?String(e).replace(/\./g,"%2E"):String(e),$=s&&Y(g)&&g.length===1?T+"[]":T;if(r&&Y(g)&&g.length===0)return $+"[]";for(let R=0;R<B.length;++R){const N=B[R],ss=typeof N=="object"&&typeof N.value<"u"?N.value:g[N];if(i&&ss===null)continue;const ct=c&&o?N.replace(/\./g,"%2E"):N,Bn=Y(g)?typeof t=="function"?t($,ct):$:$+(c?"."+ct:"["+ct+"]");A.set(n,E);const ns=new WeakMap;ns.set(dt,A),Is(D,Os(ss,Bn,t,s,r,a,i,o,t==="comma"&&m&&Y(g)?null:u,d,y,c,f,h,w,m,S,ns))}return D}function dr(n=O){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||O.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=bt;if(typeof n.format<"u"){if(!or.call(xt,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const s=xt[t];let r=O.filter;(typeof n.filter=="function"||Y(n.filter))&&(r=n.filter);let a;if(n.arrayFormat&&n.arrayFormat in Ns?a=n.arrayFormat:"indices"in n?a=n.indices?"indices":"repeat":a=O.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const i=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:O.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:O.addQueryPrefix,allowDots:i,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:O.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:O.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?O.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:O.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:O.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:O.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:O.encodeValuesOnly,filter:r,format:t,formatter:s,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:O.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:O.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:O.strictNullHandling}}function hr(n,e={}){let t=n;const s=dr(e);let r,a;typeof s.filter=="function"?(a=s.filter,t=a("",t)):Y(s.filter)&&(a=s.filter,r=a);const i=[];if(typeof t!="object"||t===null)return"";const o=Ns[s.arrayFormat],u=o==="comma"&&s.commaRoundTrip;r||(r=Object.keys(t)),s.sort&&r.sort(s.sort);const d=new WeakMap;for(let f=0;f<r.length;++f){const h=r[f];s.skipNulls&&t[h]===null||Is(i,Os(t[h],h,o,u,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,d))}const y=i.join(s.delimiter);let c=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?c+="utf8=%26%2310003%3B&":c+="utf8=%E2%9C%93&"),y.length>0?c+y:""}const de="4.85.1";let is=!1,Re,$s,ks,Ct,js,Fs,Ts,Ms,Ls;function fr(n,e={auto:!1}){if(is)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(Re)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${Re}'\``);is=e.auto,Re=n.kind,$s=n.fetch,ks=n.FormData,Ct=n.File,js=n.ReadableStream,Fs=n.getMultipartRequestOptions,Ts=n.getDefaultAgent,Ms=n.fileFromPath,Ls=n.isFsReadStream}class mr{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function pr({manuallyImported:n}={}){const e=n?"You may need to use polyfills":"Add one of these imports before your first `import â€¦ from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,s,r,a;try{t=fetch,s=Request,r=Response,a=Headers}catch(i){throw new Error(`this environment is missing the following Web Fetch API type: ${i.message}. ${e}`)}return{kind:"web",fetch:t,Request:s,Response:r,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(i,o)=>({...o,body:new mr(i)}),getDefaultAgent:i=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:i=>!1}}Re||fr(pr(),{auto:!0});class _ extends Error{}class L extends _{constructor(e,t,s,r){super(`${L.makeMessage(e,t,s)}`),this.status=e,this.headers=r,this.request_id=r?.["x-request-id"],this.error=t;const a=t;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,t,s){const r=t?.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,s,r){if(!e||!r)return new tt({message:s,cause:vt(t)});const a=t?.error;return e===400?new Ds(e,a,s,r):e===401?new Bs(e,a,s,r):e===403?new Us(e,a,s,r):e===404?new Hs(e,a,s,r):e===409?new Vs(e,a,s,r):e===422?new Ws(e,a,s,r):e===429?new Js(e,a,s,r):e>=500?new qs(e,a,s,r):new L(e,a,s,r)}}class z extends L{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class tt extends L{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class kt extends tt{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Ds extends L{}class Bs extends L{}class Us extends L{}class Hs extends L{}class Vs extends L{}class Ws extends L{}class Js extends L{}class qs extends L{}class Xs extends _{constructor(){super("Could not parse response content as the length limit was reached")}}class Gs extends _{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var Me=function(n,e,t,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},ie=function(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)},J;class st{constructor(){J.set(this,void 0),this.buffer=new Uint8Array,Me(this,J,null,"f")}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let s=new Uint8Array(this.buffer.length+t.length);s.set(this.buffer),s.set(t,this.buffer.length),this.buffer=s;const r=[];let a;for(;(a=gr(this.buffer,ie(this,J,"f")))!=null;){if(a.carriage&&ie(this,J,"f")==null){Me(this,J,a.index,"f");continue}if(ie(this,J,"f")!=null&&(a.index!==ie(this,J,"f")+1||a.carriage)){r.push(this.decodeText(this.buffer.slice(0,ie(this,J,"f")-1))),this.buffer=this.buffer.slice(ie(this,J,"f")),Me(this,J,null,"f");continue}const i=ie(this,J,"f")!==null?a.preceding-1:a.preceding,o=this.decodeText(this.buffer.slice(0,i));r.push(o),this.buffer=this.buffer.slice(a.index),Me(this,J,null,"f")}return r}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new _(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new _(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new _("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}J=new WeakMap;st.NEWLINE_CHARS=new Set([`
`,"\r"]);st.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function gr(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function Ks(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t?.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class te{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let s=!1;async function*r(){if(s)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{for await(const i of yr(e,t))if(!a){if(i.data.startsWith("[DONE]")){a=!0;continue}if(i.event===null){let o;try{o=JSON.parse(i.data)}catch(u){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),u}if(o&&o.error)throw new L(void 0,o.error,void 0,void 0);yield o}else{let o;try{o=JSON.parse(i.data)}catch(u){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),u}if(i.event=="error")throw new L(void 0,o.error,o.message,void 0);yield{event:i.event,data:o}}}a=!0}catch(i){if(i instanceof Error&&i.name==="AbortError")return;throw i}finally{a||t.abort()}}return new te(r,t)}static fromReadableStream(e,t){let s=!1;async function*r(){const i=new st,o=Ks(e);for await(const u of o)for(const d of i.decode(u))yield d;for(const u of i.flush())yield u}async function*a(){if(s)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let i=!1;try{for await(const o of r())i||o&&(yield JSON.parse(o));i=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{i||t.abort()}}return new te(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),r=a=>({next:()=>{if(a.length===0){const i=s.next();e.push(i),t.push(i)}return a.shift()}});return[new te(()=>r(e),this.controller),new te(()=>r(t),this.controller)]}toReadableStream(){const e=this;let t;const s=new TextEncoder;return new js({async start(){t=e[Symbol.asyncIterator]()},async pull(r){try{const{value:a,done:i}=await t.next();if(i)return r.close();const o=s.encode(JSON.stringify(a)+`
`);r.enqueue(o)}catch(a){r.error(a)}},async cancel(){await t.return?.()}})}}async function*yr(n,e){if(!n.body)throw e.abort(),new _("Attempted to iterate over a response with no body");const t=new br,s=new st,r=Ks(n.body);for await(const a of wr(r))for(const i of s.decode(a)){const o=t.decode(i);o&&(yield o)}for(const a of s.flush()){const i=t.decode(a);i&&(yield i)}}async function*wr(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const s=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let r=new Uint8Array(e.length+s.length);r.set(e),r.set(s,e.length),e=r;let a;for(;(a=_r(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}function _r(n){for(let s=0;s<n.length-2;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}class br{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,r]=xr(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function xr(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}const zs=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",Qs=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&nt(n),nt=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",Cr=n=>Qs(n)||zs(n)||Ls(n);async function Zs(n,e,t){if(n=await n,Qs(n))return n;if(zs(n)){const r=await n.blob();e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file");const a=nt(r)?[await r.arrayBuffer()]:[r];return new Ct(a,e,t)}const s=await Sr(n);if(e||(e=Ar(n)??"unknown_file"),!t?.type){const r=s[0]?.type;typeof r=="string"&&(t={...t,type:r})}return new Ct(s,e,t)}async function Sr(n){let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(nt(n))e.push(await n.arrayBuffer());else if(Er(n))for await(const t of n)e.push(t);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${n?.constructor?.name}; props: ${vr(n)}`);return e}function vr(n){return`[${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}function Ar(n){return ht(n.name)||ht(n.filename)||ht(n.path)?.split(/[\\/]/).pop()}const ht=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},Er=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",os=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody",ye=async n=>{const e=await Pr(n.body);return Fs(e,n)},Pr=async n=>{const e=new ks;return await Promise.all(Object.entries(n||{}).map(([t,s])=>St(e,t,s))),e},St=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(Cr(t)){const s=await Zs(t);n.append(e,s)}else if(Array.isArray(t))await Promise.all(t.map(s=>St(n,e+"[]",s)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([s,r])=>St(n,`${e}[${s}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var Ys={},Rr=function(n,e,t,s,r){if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t},Nr=function(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)},Le;async function en(n){const{response:e}=n;if(n.options.stream)return me("response",e.status,e.url,e.headers,e.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(e,n.controller):te.fromSSEResponse(e,n.controller);if(e.status===204)return null;if(n.options.__binaryResponse)return e;const t=e.headers.get("content-type");if(t?.includes("application/json")||t?.includes("application/vnd.api+json")){const a=await e.json();return me("response",e.status,e.url,e.headers,a),tn(a,e)}const r=await e.text();return me("response",e.status,e.url,e.headers,r),r}function tn(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class rt extends Promise{constructor(e,t=en){super(s=>{s(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new rt(this.responsePromise,async t=>tn(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Ir{constructor({baseURL:e,maxRetries:t=2,timeout:s=6e5,httpAgent:r,fetch:a}){this.baseURL=e,this.maxRetries=ft("maxRetries",t),this.timeout=ft("timeout",s),this.httpAgent=r,this.fetch=a??$s}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Tr(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${Br()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(async r=>{const a=r&&nt(r?.body)?new DataView(await r.body.arrayBuffer()):r?.body instanceof DataView?r.body:r?.body instanceof ArrayBuffer?new DataView(r.body):r&&ArrayBuffer.isView(r?.body)?new DataView(r.body.buffer):r?.body;return{method:e,path:t,...r,body:a}}))}getAPIList(e,t,s){return this.requestAPIList(t,{method:"get",path:e,...s})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){e={...e};const{method:s,path:r,query:a,headers:i={}}=e,o=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:os(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,u=this.calculateContentLength(o),d=this.buildURL(r,a);"timeout"in e&&ft("timeout",e.timeout),e.timeout=e.timeout??this.timeout;const y=e.httpAgent??this.httpAgent??Ts(d),c=e.timeout+1e3;typeof y?.options?.timeout=="number"&&c>(y.options.timeout??0)&&(y.options.timeout=c),this.idempotencyHeader&&s!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const f=this.buildHeaders({options:e,headers:i,contentLength:u,retryCount:t});return{req:{method:s,...o&&{body:o},headers:f,...y&&{agent:y},signal:e.signal??null},url:d,timeout:e.timeout}}buildHeaders({options:e,headers:t,contentLength:s,retryCount:r}){const a={};s&&(a["content-length"]=s);const i=this.defaultHeaders(e);return ds(a,i),ds(a,t),os(e.body)&&Re!=="node"&&delete a["content-type"],Be(i,"x-stainless-retry-count")===void 0&&Be(t,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(r)),Be(i,"x-stainless-timeout")===void 0&&Be(t,"x-stainless-timeout")===void 0&&e.timeout&&(a["x-stainless-timeout"]=String(e.timeout)),this.validateHeaders(a,t),a}async prepareOptions(e){}async prepareRequest(e,{url:t,options:s}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,s,r){return L.generate(e,t,s,r)}request(e,t=null){return new rt(this.makeRequest(e,t))}async makeRequest(e,t){const s=await e,r=s.maxRetries??this.maxRetries;t==null&&(t=r),await this.prepareOptions(s);const{req:a,url:i,timeout:o}=this.buildRequest(s,{retryCount:r-t});if(await this.prepareRequest(a,{url:i,options:s}),me("request",i,s,a.headers),s.signal?.aborted)throw new z;const u=new AbortController,d=await this.fetchWithTimeout(i,a,o,u).catch(vt);if(d instanceof Error){if(s.signal?.aborted)throw new z;if(t)return this.retryRequest(s,t);throw d.name==="AbortError"?new kt:new tt({cause:d})}const y=$r(d.headers);if(!d.ok){if(t&&this.shouldRetry(d)){const S=`retrying, ${t} attempts remaining`;return me(`response (error; ${S})`,d.status,i,y),this.retryRequest(s,t,y)}const c=await d.text().catch(S=>vt(S).message),f=Mr(c),h=f?void 0:c;throw me(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,d.status,i,y,h),this.makeStatusError(d.status,f,h,y)}return{response:d,options:s,controller:u}}requestAPIList(e,t){const s=this.makeRequest(t,null);return new Or(this,s,e)}buildURL(e,t){const s=Dr(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return nn(r)||(t={...r,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(s.search=this.stringifyQuery(t)),s.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new _(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,s,r){const{signal:a,...i}=t||{};a&&a.addEventListener("abort",()=>r.abort());const o=setTimeout(()=>r.abort(),s),u={signal:r.signal,...i};return u.method&&(u.method=u.method.toUpperCase()),this.fetch.call(void 0,e,u).finally(()=>{clearTimeout(o)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s){let r;const a=s?.["retry-after-ms"];if(a){const o=parseFloat(a);Number.isNaN(o)||(r=o)}const i=s?.["retry-after"];if(i&&!r){const o=parseFloat(i);Number.isNaN(o)?r=Date.parse(i)-Date.now():r=o*1e3}if(!(r&&0<=r&&r<60*1e3)){const o=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,o)}return await $e(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,i=Math.min(.5*Math.pow(2,a),8),o=1-Math.random()*.25;return i*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${de}`}}class sn{constructor(e,t,s,r){Le.set(this,void 0),Rr(this,Le,e),this.options=r,this.response=t,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new _("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const s=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[r,a]of s)e.url.searchParams.set(r,a);t.query=void 0,t.path=e.url.toString()}return await Nr(this,Le,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Le=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class Or extends rt{constructor(e,t,s){super(t,async r=>new s(e,r.response,await en(r),r.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const $r=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,t){const s=t.toString();return e[s.toLowerCase()]||e[s]}}),kr={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},H=n=>typeof n=="object"&&n!==null&&!nn(n)&&Object.keys(n).every(e=>rn(kr,e)),jr=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":de,"X-Stainless-OS":cs(Deno.build.os),"X-Stainless-Arch":ls(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":de,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":de,"X-Stainless-OS":cs(process.platform),"X-Stainless-Arch":ls(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=Fr();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":de,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":de,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Fr(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const r=s[1]||0,a=s[2]||0,i=s[3]||0;return{browser:e,version:`${r}.${a}.${i}`}}}return null}const ls=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",cs=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let us;const Tr=()=>us??(us=jr()),Mr=n=>{try{return JSON.parse(n)}catch{return}},Lr=/^[a-z][a-z0-9+.-]*:/i,Dr=n=>Lr.test(n),$e=n=>new Promise(e=>setTimeout(e,n)),ft=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new _(`${n} must be an integer`);if(e<0)throw new _(`${n} must be a positive integer`);return e},vt=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null)try{return new Error(JSON.stringify(n))}catch{}return new Error(n)},De=n=>{if(typeof process<"u")return Ys?.[n]?.trim()??void 0;if(typeof Deno<"u")return Deno.env?.get?.(n)?.trim()};function nn(n){if(!n)return!0;for(const e in n)return!1;return!0}function rn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function ds(n,e){for(const t in e){if(!rn(e,t))continue;const s=t.toLowerCase();if(!s)continue;const r=e[t];r===null?delete n[s]:r!==void 0&&(n[s]=r)}}const hs=new Set(["authorization","api-key"]);function me(n,...e){if(typeof process<"u"&&Ys?.DEBUG==="true"){const t=e.map(s=>{if(!s)return s;if(s.headers){const a={...s,headers:{...s.headers}};for(const i in s.headers)hs.has(i.toLowerCase())&&(a.headers[i]="REDACTED");return a}let r=null;for(const a in s)hs.has(a.toLowerCase())&&(r??(r={...s}),r[a]="REDACTED");return r??s});console.log(`OpenAI:DEBUG:${n}`,...t)}}const Br=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),Ur=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",Hr=n=>typeof n?.get=="function",Be=(n,e)=>{const t=e.toLowerCase();if(Hr(n)){const s=e[0]?.toUpperCase()+e.substring(1).replace(/([^\w])(\w)/g,(r,a,i)=>a+i.toUpperCase());for(const r of[e,t,e.toUpperCase(),s]){const a=n.get(r);if(a)return a}}for(const[s,r]of Object.entries(n))if(s.toLowerCase()===t)return Array.isArray(r)?(r.length<=1||console.warn(`Received ${r.length} entries for the ${e} header, using the first entry.`),r[0]):r};function mt(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}class Vr extends sn{constructor(e,t,s,r){super(e,t,s,r),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class X extends sn{constructor(e,t,s,r){super(e,t,s,r),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const t=e[e.length-1]?.id;return t?{params:{after:t}}:null}}class x{constructor(e){this._client=e}}let an=class extends x{list(e,t={},s){return H(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,Wr,{query:t,...s})}},at=class extends x{constructor(){super(...arguments),this.messages=new an(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,s){return this._client.post(`/chat/completions/${e}`,{body:t,...s})}list(e={},t){return H(e)?this.list({},e):this._client.getAPIList("/chat/completions",it,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}};class it extends X{}class Wr extends X{}at.ChatCompletionsPage=it;at.Messages=an;let ot=class extends x{constructor(){super(...arguments),this.completions=new at(this._client)}};ot.Completions=at;ot.ChatCompletionsPage=it;class on extends x{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t?.headers},__binaryResponse:!0})}}class ln extends x{create(e,t){return this._client.post("/audio/transcriptions",ye({body:e,...t,__metadata:{model:e.model}}))}}class cn extends x{create(e,t){return this._client.post("/audio/translations",ye({body:e,...t,__metadata:{model:e.model}}))}}class ke extends x{constructor(){super(...arguments),this.transcriptions=new ln(this._client),this.translations=new cn(this._client),this.speech=new on(this._client)}}ke.Transcriptions=ln;ke.Translations=cn;ke.Speech=on;class jt extends x{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return H(e)?this.list({},e):this._client.getAPIList("/batches",Ft,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class Ft extends X{}jt.BatchesPage=Ft;class Tt extends x{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,s){return this._client.post(`/assistants/${e}`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}list(e={},t){return H(e)?this.list({},e):this._client.getAPIList("/assistants",Mt,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class Mt extends X{}Tt.AssistantsPage=Mt;function fs(n){return typeof n.parse=="function"}const pe=n=>n?.role==="assistant",un=n=>n?.role==="function",dn=n=>n?.role==="tool";var G=function(n,e,t,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},v=function(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)},At,We,Je,Ce,Se,qe,ve,ne,Ae,ze,Qe,he,hn;class fn{constructor(){At.add(this),this.controller=new AbortController,We.set(this,void 0),Je.set(this,()=>{}),Ce.set(this,()=>{}),Se.set(this,void 0),qe.set(this,()=>{}),ve.set(this,()=>{}),ne.set(this,{}),Ae.set(this,!1),ze.set(this,!1),Qe.set(this,!1),he.set(this,!1),G(this,We,new Promise((e,t)=>{G(this,Je,e,"f"),G(this,Ce,t,"f")}),"f"),G(this,Se,new Promise((e,t)=>{G(this,qe,e,"f"),G(this,ve,t,"f")}),"f"),v(this,We,"f").catch(()=>{}),v(this,Se,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},v(this,At,"m",hn).bind(this))},0)}_connected(){this.ended||(v(this,Je,"f").call(this),this._emit("connect"))}get ended(){return v(this,Ae,"f")}get errored(){return v(this,ze,"f")}get aborted(){return v(this,Qe,"f")}abort(){this.controller.abort()}on(e,t){return(v(this,ne,"f")[e]||(v(this,ne,"f")[e]=[])).push({listener:t}),this}off(e,t){const s=v(this,ne,"f")[e];if(!s)return this;const r=s.findIndex(a=>a.listener===t);return r>=0&&s.splice(r,1),this}once(e,t){return(v(this,ne,"f")[e]||(v(this,ne,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,s)=>{G(this,he,!0,"f"),e!=="error"&&this.once("error",s),this.once(e,t)})}async done(){G(this,he,!0,"f"),await v(this,Se,"f")}_emit(e,...t){if(v(this,Ae,"f"))return;e==="end"&&(G(this,Ae,!0,"f"),v(this,qe,"f").call(this));const s=v(this,ne,"f")[e];if(s&&(v(this,ne,"f")[e]=s.filter(r=>!r.once),s.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!v(this,he,"f")&&!s?.length&&Promise.reject(r),v(this,Ce,"f").call(this,r),v(this,ve,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!v(this,he,"f")&&!s?.length&&Promise.reject(r),v(this,Ce,"f").call(this,r),v(this,ve,"f").call(this,r),this._emit("end")}}_emitFinal(){}}We=new WeakMap,Je=new WeakMap,Ce=new WeakMap,Se=new WeakMap,qe=new WeakMap,ve=new WeakMap,ne=new WeakMap,Ae=new WeakMap,ze=new WeakMap,Qe=new WeakMap,he=new WeakMap,At=new WeakSet,hn=function(e){if(G(this,ze,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new z),e instanceof z)return G(this,Qe,!0,"f"),this._emit("abort",e);if(e instanceof _)return this._emit("error",e);if(e instanceof Error){const t=new _(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new _(String(e)))};function mn(n){return n?.$brand==="auto-parseable-response-format"}function je(n){return n?.$brand==="auto-parseable-tool"}function Jr(n,e){return!e||!pn(e)?{...n,choices:n.choices.map(t=>({...t,message:{...t.message,parsed:null,tool_calls:t.message.tool_calls??[]}}))}:Lt(n,e)}function Lt(n,e){const t=n.choices.map(s=>{if(s.finish_reason==="length")throw new Xs;if(s.finish_reason==="content_filter")throw new Gs;return{...s,message:{...s.message,tool_calls:s.message.tool_calls?.map(r=>Xr(e,r))??[],parsed:s.message.content&&!s.message.refusal?qr(e,s.message.content):null}}});return{...n,choices:t}}function qr(n,e){return n.response_format?.type!=="json_schema"?null:n.response_format?.type==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function Xr(n,e){const t=n.tools?.find(s=>s.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:je(t)?t.$parseRaw(e.function.arguments):t?.function.strict?JSON.parse(e.function.arguments):null}}}function Gr(n,e){if(!n)return!1;const t=n.tools?.find(s=>s.function?.name===e.function.name);return je(t)||t?.function.strict||!1}function pn(n){return mn(n.response_format)?!0:n.tools?.some(e=>je(e)||e.type==="function"&&e.function.strict===!0)??!1}function Kr(n){for(const e of n??[]){if(e.type!=="function")throw new _(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new _(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var V=function(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)},U,Et,Ze,Pt,Rt,Nt,gn,It;const ms=10;class yn extends fn{constructor(){super(...arguments),U.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(un(e)||dn(e))&&e.content)this._emit("functionCallResult",e.content);else if(pe(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(pe(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new _("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),V(this,U,"m",Et).call(this)}async finalMessage(){return await this.done(),V(this,U,"m",Ze).call(this)}async finalFunctionCall(){return await this.done(),V(this,U,"m",Pt).call(this)}async finalFunctionCallResult(){return await this.done(),V(this,U,"m",Rt).call(this)}async totalUsage(){return await this.done(),V(this,U,"m",Nt).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=V(this,U,"m",Ze).call(this);t&&this._emit("finalMessage",t);const s=V(this,U,"m",Et).call(this);s&&this._emit("finalContent",s);const r=V(this,U,"m",Pt).call(this);r&&this._emit("finalFunctionCall",r);const a=V(this,U,"m",Rt).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(i=>i.usage)&&this._emit("totalUsage",V(this,U,"m",Nt).call(this))}async _createChatCompletion(e,t,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),V(this,U,"m",gn).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Lt(a,t))}async _runChatCompletion(e,t,s){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,s)}async _runFunctions(e,t,s){const r="function",{function_call:a="auto",stream:i,...o}=t,u=typeof a!="string"&&a?.name,{maxChatCompletions:d=ms}=s||{},y={};for(const f of t.functions)y[f.name||f.function.name]=f;const c=t.functions.map(f=>({name:f.name||f.function.name,parameters:f.parameters,description:f.description}));for(const f of t.messages)this._addMessage(f,!1);for(let f=0;f<d;++f){const w=(await this._createChatCompletion(e,{...o,function_call:a,functions:c,messages:[...this.messages]},s)).choices[0]?.message;if(!w)throw new _("missing message in ChatCompletion response");if(!w.function_call)return;const{name:m,arguments:S}=w.function_call,A=y[m];if(A){if(u&&u!==m){const F=`Invalid function_call: ${JSON.stringify(m)}. ${JSON.stringify(u)} requested. Please try again`;this._addMessage({role:r,name:m,content:F});continue}}else{const F=`Invalid function_call: ${JSON.stringify(m)}. Available options are: ${c.map(D=>JSON.stringify(D.name)).join(", ")}. Please try again`;this._addMessage({role:r,name:m,content:F});continue}let g;try{g=fs(A)?await A.parse(S):S}catch(F){this._addMessage({role:r,name:m,content:F instanceof Error?F.message:String(F)});continue}const j=await A.function(g,this),E=V(this,U,"m",It).call(this,j);if(this._addMessage({role:r,name:m,content:E}),u)return}}async _runTools(e,t,s){const r="tool",{tool_choice:a="auto",stream:i,...o}=t,u=typeof a!="string"&&a?.function?.name,{maxChatCompletions:d=ms}=s||{},y=t.tools.map(h=>{if(je(h)){if(!h.$callback)throw new _("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:h.$callback,name:h.function.name,description:h.function.description||"",parameters:h.function.parameters,parse:h.$parseRaw,strict:!0}}}return h}),c={};for(const h of y)h.type==="function"&&(c[h.function.name||h.function.function.name]=h.function);const f="tools"in t?y.map(h=>h.type==="function"?{type:"function",function:{name:h.function.name||h.function.function.name,parameters:h.function.parameters,description:h.function.description,strict:h.function.strict}}:h):void 0;for(const h of t.messages)this._addMessage(h,!1);for(let h=0;h<d;++h){const m=(await this._createChatCompletion(e,{...o,tool_choice:a,tools:f,messages:[...this.messages]},s)).choices[0]?.message;if(!m)throw new _("missing message in ChatCompletion response");if(!m.tool_calls?.length)return;for(const S of m.tool_calls){if(S.type!=="function")continue;const A=S.id,{name:g,arguments:j}=S.function,E=c[g];if(E){if(u&&u!==g){const T=`Invalid tool_call: ${JSON.stringify(g)}. ${JSON.stringify(u)} requested. Please try again`;this._addMessage({role:r,tool_call_id:A,content:T});continue}}else{const T=`Invalid tool_call: ${JSON.stringify(g)}. Available options are: ${Object.keys(c).map($=>JSON.stringify($)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:A,content:T});continue}let F;try{F=fs(E)?await E.parse(j):j}catch(T){const $=T instanceof Error?T.message:String(T);this._addMessage({role:r,tool_call_id:A,content:$});continue}const D=await E.function(F,this),B=V(this,U,"m",It).call(this,D);if(this._addMessage({role:r,tool_call_id:A,content:B}),u)return}}}}U=new WeakSet,Et=function(){return V(this,U,"m",Ze).call(this).content??null},Ze=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(pe(t)){const{function_call:s,...r}=t,a={...r,content:t.content??null,refusal:t.refusal??null};return s&&(a.function_call=s),a}}throw new _("stream ended without producing a ChatCompletionMessage with role=assistant")},Pt=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(pe(t)&&t?.function_call)return t.function_call;if(pe(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},Rt=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(un(t)&&t.content!=null||dn(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(s=>s.role==="assistant"&&s.tool_calls?.some(r=>r.type==="function"&&r.id===t.tool_call_id)))return t.content}},Nt=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},gn=function(e){if(e.n!=null&&e.n>1)throw new _("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},It=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Ie extends yn{static runFunctions(e,t,s){const r=new Ie,a={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,a)),r}static runTools(e,t,s){const r=new Ie,a={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}_addMessage(e,t=!0){super._addMessage(e,t),pe(e)&&e.content&&this._emit("content",e.content)}}const wn=1,_n=2,bn=4,xn=8,Cn=16,Sn=32,vn=64,An=128,En=256,Pn=An|En,Rn=Cn|Sn|Pn|vn,Nn=wn|_n|Rn,In=bn|xn,zr=Nn|In,k={STR:wn,NUM:_n,ARR:bn,OBJ:xn,NULL:Cn,BOOL:Sn,NAN:vn,INFINITY:An,MINUS_INFINITY:En,INF:Pn,SPECIAL:Rn,ATOM:Nn,COLLECTION:In,ALL:zr};class Qr extends Error{}class Zr extends Error{}function Yr(n,e=k.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return ea(n.trim(),e)}const ea=(n,e)=>{const t=n.length;let s=0;const r=f=>{throw new Qr(`${f} at position ${s}`)},a=f=>{throw new Zr(`${f} at position ${s}`)},i=()=>(c(),s>=t&&r("Unexpected end of input"),n[s]==='"'?o():n[s]==="{"?u():n[s]==="["?d():n.substring(s,s+4)==="null"||k.NULL&e&&t-s<4&&"null".startsWith(n.substring(s))?(s+=4,null):n.substring(s,s+4)==="true"||k.BOOL&e&&t-s<4&&"true".startsWith(n.substring(s))?(s+=4,!0):n.substring(s,s+5)==="false"||k.BOOL&e&&t-s<5&&"false".startsWith(n.substring(s))?(s+=5,!1):n.substring(s,s+8)==="Infinity"||k.INFINITY&e&&t-s<8&&"Infinity".startsWith(n.substring(s))?(s+=8,1/0):n.substring(s,s+9)==="-Infinity"||k.MINUS_INFINITY&e&&1<t-s&&t-s<9&&"-Infinity".startsWith(n.substring(s))?(s+=9,-1/0):n.substring(s,s+3)==="NaN"||k.NAN&e&&t-s<3&&"NaN".startsWith(n.substring(s))?(s+=3,NaN):y()),o=()=>{const f=s;let h=!1;for(s++;s<t&&(n[s]!=='"'||h&&n[s-1]==="\\");)h=n[s]==="\\"?!h:!1,s++;if(n.charAt(s)=='"')try{return JSON.parse(n.substring(f,++s-Number(h)))}catch(w){a(String(w))}else if(k.STR&e)try{return JSON.parse(n.substring(f,s-Number(h))+'"')}catch{return JSON.parse(n.substring(f,n.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},u=()=>{s++,c();const f={};try{for(;n[s]!=="}";){if(c(),s>=t&&k.OBJ&e)return f;const h=o();c(),s++;try{const w=i();Object.defineProperty(f,h,{value:w,writable:!0,enumerable:!0,configurable:!0})}catch(w){if(k.OBJ&e)return f;throw w}c(),n[s]===","&&s++}}catch{if(k.OBJ&e)return f;r("Expected '}' at end of object")}return s++,f},d=()=>{s++;const f=[];try{for(;n[s]!=="]";)f.push(i()),c(),n[s]===","&&s++}catch{if(k.ARR&e)return f;r("Expected ']' at end of array")}return s++,f},y=()=>{if(s===0){n==="-"&&k.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n)}catch(h){if(k.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}a(String(h))}}const f=s;for(n[s]==="-"&&s++;n[s]&&!",]}".includes(n[s]);)s++;s==t&&!(k.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(n.substring(f,s))}catch{n.substring(f,s)==="-"&&k.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n.substring(f,n.lastIndexOf("e")))}catch(w){a(String(w))}}},c=()=>{for(;s<t&&` 
\r	`.includes(n[s]);)s++};return i()},ps=n=>Yr(n,k.ALL^k.NUM);var ce=function(n,e,t,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},C=function(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)},I,se,ue,re,pt,Ue,gt,yt,wt,He,_t,gs;class Oe extends yn{constructor(e){super(),I.add(this),se.set(this,void 0),ue.set(this,void 0),re.set(this,void 0),ce(this,se,e,"f"),ce(this,ue,[],"f")}get currentChatCompletionSnapshot(){return C(this,re,"f")}static fromReadableStream(e){const t=new Oe(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,s){const r=new Oe(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,s){super._createChatCompletion;const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),C(this,I,"m",pt).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const i of a)C(this,I,"m",gt).call(this,i);if(a.controller.signal?.aborted)throw new z;return this._addChatCompletion(C(this,I,"m",He).call(this))}async _fromReadableStream(e,t){const s=t?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),C(this,I,"m",pt).call(this),this._connected();const r=te.fromReadableStream(e,this.controller);let a;for await(const i of r)a&&a!==i.id&&this._addChatCompletion(C(this,I,"m",He).call(this)),C(this,I,"m",gt).call(this,i),a=i.id;if(r.controller.signal?.aborted)throw new z;return this._addChatCompletion(C(this,I,"m",He).call(this))}[(se=new WeakMap,ue=new WeakMap,re=new WeakMap,I=new WeakSet,pt=function(){this.ended||ce(this,re,void 0,"f")},Ue=function(t){let s=C(this,ue,"f")[t.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},C(this,ue,"f")[t.index]=s,s)},gt=function(t){if(this.ended)return;const s=C(this,I,"m",gs).call(this,t);this._emit("chunk",t,s);for(const r of t.choices){const a=s.choices[r.index];r.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",r.delta.content,a.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),r.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:a.message.refusal}),r.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:a.logprobs?.content??[]}),r.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const i=C(this,I,"m",Ue).call(this,a);a.finish_reason&&(C(this,I,"m",wt).call(this,a),i.current_tool_call_index!=null&&C(this,I,"m",yt).call(this,a,i.current_tool_call_index));for(const o of r.delta.tool_calls??[])i.current_tool_call_index!==o.index&&(C(this,I,"m",wt).call(this,a),i.current_tool_call_index!=null&&C(this,I,"m",yt).call(this,a,i.current_tool_call_index)),i.current_tool_call_index=o.index;for(const o of r.delta.tool_calls??[]){const u=a.message.tool_calls?.[o.index];u?.type&&(u?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:u.function?.name,index:o.index,arguments:u.function.arguments,parsed_arguments:u.function.parsed_arguments,arguments_delta:o.function?.arguments??""}):(u?.type,void 0))}}},yt=function(t,s){if(C(this,I,"m",Ue).call(this,t).done_tool_calls.has(s))return;const a=t.message.tool_calls?.[s];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const i=C(this,se,"f")?.tools?.find(o=>o.type==="function"&&o.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:s,arguments:a.function.arguments,parsed_arguments:je(i)?i.$parseRaw(a.function.arguments):i?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},wt=function(t){const s=C(this,I,"m",Ue).call(this,t);if(t.message.content&&!s.content_done){s.content_done=!0;const r=C(this,I,"m",_t).call(this);this._emit("content.done",{content:t.message.content,parsed:r?r.$parseRaw(t.message.content):null})}t.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),t.logprobs?.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),t.logprobs?.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},He=function(){if(this.ended)throw new _("stream has ended, this shouldn't happen");const t=C(this,re,"f");if(!t)throw new _("request ended without sending any chunks");return ce(this,re,void 0,"f"),ce(this,ue,[],"f"),ta(t,C(this,se,"f"))},_t=function(){const t=C(this,se,"f")?.response_format;return mn(t)?t:null},gs=function(t){var s,r,a,i;let o=C(this,re,"f");const{choices:u,...d}=t;o?Object.assign(o,d):o=ce(this,re,{...d,choices:[]},"f");for(const{delta:y,finish_reason:c,index:f,logprobs:h=null,...w}of t.choices){let m=o.choices[f];if(m||(m=o.choices[f]={finish_reason:c,index:f,message:{},logprobs:h,...w}),h)if(!m.logprobs)m.logprobs=Object.assign({},h);else{const{content:D,refusal:B,...T}=h;Object.assign(m.logprobs,T),D&&((s=m.logprobs).content??(s.content=[]),m.logprobs.content.push(...D)),B&&((r=m.logprobs).refusal??(r.refusal=[]),m.logprobs.refusal.push(...B))}if(c&&(m.finish_reason=c,C(this,se,"f")&&pn(C(this,se,"f")))){if(c==="length")throw new Xs;if(c==="content_filter")throw new Gs}if(Object.assign(m,w),!y)continue;const{content:S,refusal:A,function_call:g,role:j,tool_calls:E,...F}=y;if(Object.assign(m.message,F),A&&(m.message.refusal=(m.message.refusal||"")+A),j&&(m.message.role=j),g&&(m.message.function_call?(g.name&&(m.message.function_call.name=g.name),g.arguments&&((a=m.message.function_call).arguments??(a.arguments=""),m.message.function_call.arguments+=g.arguments)):m.message.function_call=g),S&&(m.message.content=(m.message.content||"")+S,!m.message.refusal&&C(this,I,"m",_t).call(this)&&(m.message.parsed=ps(m.message.content))),E){m.message.tool_calls||(m.message.tool_calls=[]);for(const{index:D,id:B,type:T,function:$,...R}of E){const N=(i=m.message.tool_calls)[D]??(i[D]={});Object.assign(N,R),B&&(N.id=B),T&&(N.type=T),$&&(N.function??(N.function={name:$.name??"",arguments:""})),$?.name&&(N.function.name=$.name),$?.arguments&&(N.function.arguments+=$.arguments,Gr(C(this,se,"f"),N)&&(N.function.parsed_arguments=ps(N.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("chunk",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{s=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{s=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new te(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function ta(n,e){const{id:t,choices:s,created:r,model:a,system_fingerprint:i,...o}=n,u={...o,id:t,choices:s.map(({message:d,finish_reason:y,index:c,logprobs:f,...h})=>{if(!y)throw new _(`missing finish_reason for choice ${c}`);const{content:w=null,function_call:m,tool_calls:S,...A}=d,g=d.role;if(!g)throw new _(`missing role for choice ${c}`);if(m){const{arguments:j,name:E}=m;if(j==null)throw new _(`missing function_call.arguments for choice ${c}`);if(!E)throw new _(`missing function_call.name for choice ${c}`);return{...h,message:{content:w,function_call:{arguments:j,name:E},role:g,refusal:d.refusal??null},finish_reason:y,index:c,logprobs:f}}return S?{...h,index:c,finish_reason:y,logprobs:f,message:{...A,role:g,content:w,refusal:d.refusal??null,tool_calls:S.map((j,E)=>{const{function:F,type:D,id:B,...T}=j,{arguments:$,name:R,...N}=F||{};if(B==null)throw new _(`missing choices[${c}].tool_calls[${E}].id
${Ve(n)}`);if(D==null)throw new _(`missing choices[${c}].tool_calls[${E}].type
${Ve(n)}`);if(R==null)throw new _(`missing choices[${c}].tool_calls[${E}].function.name
${Ve(n)}`);if($==null)throw new _(`missing choices[${c}].tool_calls[${E}].function.arguments
${Ve(n)}`);return{...T,id:B,type:D,function:{...N,name:R,arguments:$}}})}}:{...h,message:{...A,content:w,role:g,refusal:d.refusal??null},finish_reason:y,index:c,logprobs:f}}),created:r,model:a,object:"chat.completion",...i?{system_fingerprint:i}:{}};return Jr(u,e)}function Ve(n){return JSON.stringify(n)}class ge extends Oe{static fromReadableStream(e){const t=new ge(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,s){const r=new ge(null),a={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,a)),r}static runTools(e,t,s){const r=new ge(t),a={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}}let On=class extends x{parse(e,t){return Kr(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(s=>Lt(s,e))}runFunctions(e,t){return e.stream?ge.runFunctions(this._client,e,t):Ie.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?ge.runTools(this._client,e,t):Ie.runTools(this._client,e,t)}stream(e,t){return Oe.createChatCompletion(this._client,e,t)}};class Ot extends x{constructor(){super(...arguments),this.completions=new On(this._client)}}(function(n){n.Completions=On})(Ot||(Ot={}));class $n extends x{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class Dt extends x{constructor(){super(...arguments),this.sessions=new $n(this._client)}}Dt.Sessions=$n;var p=function(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)},W=function(n,e,t,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t},M,$t,ee,Xe,K,le,fe,oe,Ye,q,Ge,Ke,Ne,Ee,Pe,ys,ws,_s,bs,xs,Cs,Ss;class Q extends fn{constructor(){super(...arguments),M.add(this),$t.set(this,[]),ee.set(this,{}),Xe.set(this,{}),K.set(this,void 0),le.set(this,void 0),fe.set(this,void 0),oe.set(this,void 0),Ye.set(this,void 0),q.set(this,void 0),Ge.set(this,void 0),Ke.set(this,void 0),Ne.set(this,void 0)}[($t=new WeakMap,ee=new WeakMap,Xe=new WeakMap,K=new WeakMap,le=new WeakMap,fe=new WeakMap,oe=new WeakMap,Ye=new WeakMap,q=new WeakMap,Ge=new WeakMap,Ke=new WeakMap,Ne=new WeakMap,M=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{s=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{s=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new Q;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){const s=t?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=te.fromReadableStream(e,this.controller);for await(const a of r)p(this,M,"m",Ee).call(this,a);if(r.controller.signal?.aborted)throw new z;return this._addRun(p(this,M,"m",Pe).call(this))}toReadableStream(){return new te(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,s,r,a){const i=new Q;return i._run(()=>i._runToolAssistantStream(e,t,s,r,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,t,s,r,a){const i=a?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},u=await e.submitToolOutputs(t,s,o,{...a,signal:this.controller.signal});this._connected();for await(const d of u)p(this,M,"m",Ee).call(this,d);if(u.controller.signal?.aborted)throw new z;return this._addRun(p(this,M,"m",Pe).call(this))}static createThreadAssistantStream(e,t,s){const r=new Q;return r._run(()=>r._threadAssistantStream(e,t,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,s,r){const a=new Q;return a._run(()=>a._runAssistantStream(e,t,s,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return p(this,Ge,"f")}currentRun(){return p(this,Ke,"f")}currentMessageSnapshot(){return p(this,K,"f")}currentRunStepSnapshot(){return p(this,Ne,"f")}async finalRunSteps(){return await this.done(),Object.values(p(this,ee,"f"))}async finalMessages(){return await this.done(),Object.values(p(this,Xe,"f"))}async finalRun(){if(await this.done(),!p(this,le,"f"))throw Error("Final run was not received.");return p(this,le,"f")}async _createThreadAssistantStream(e,t,s){const r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},i=await e.createAndRun(a,{...s,signal:this.controller.signal});this._connected();for await(const o of i)p(this,M,"m",Ee).call(this,o);if(i.controller.signal?.aborted)throw new z;return this._addRun(p(this,M,"m",Pe).call(this))}async _createAssistantStream(e,t,s,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const i={...s,stream:!0},o=await e.create(t,i,{...r,signal:this.controller.signal});this._connected();for await(const u of o)p(this,M,"m",Ee).call(this,u);if(o.controller.signal?.aborted)throw new z;return this._addRun(p(this,M,"m",Pe).call(this))}static accumulateDelta(e,t){for(const[s,r]of Object.entries(t)){if(!e.hasOwnProperty(s)){e[s]=r;continue}let a=e[s];if(a==null){e[s]=r;continue}if(s==="index"||s==="type"){e[s]=r;continue}if(typeof a=="string"&&typeof r=="string")a+=r;else if(typeof a=="number"&&typeof r=="number")a+=r;else if(mt(a)&&mt(r))a=this.accumulateDelta(a,r);else if(Array.isArray(a)&&Array.isArray(r)){if(a.every(i=>typeof i=="string"||typeof i=="number")){a.push(...r);continue}for(const i of r){if(!mt(i))throw new Error(`Expected array delta entry to be an object but got: ${i}`);const o=i.index;if(o==null)throw console.error(i),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const u=a[o];u==null?a.push(i):a[o]=this.accumulateDelta(u,i)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${r}, accValue: ${a}`);e[s]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,s){return await this._createThreadAssistantStream(t,e,s)}async _runAssistantStream(e,t,s,r){return await this._createAssistantStream(t,e,s,r)}async _runToolAssistantStream(e,t,s,r,a){return await this._createToolAssistantStream(s,e,t,r,a)}}Ee=function(e){if(!this.ended)switch(W(this,Ge,e,"f"),p(this,M,"m",_s).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":p(this,M,"m",Ss).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":p(this,M,"m",ws).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":p(this,M,"m",ys).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Pe=function(){if(this.ended)throw new _("stream has ended, this shouldn't happen");if(!p(this,le,"f"))throw Error("Final run has not been received");return p(this,le,"f")},ys=function(e){const[t,s]=p(this,M,"m",xs).call(this,e,p(this,K,"f"));W(this,K,t,"f"),p(this,Xe,"f")[t.id]=t;for(const r of s){const a=t.content[r.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let a=r.text,i=t.content[r.index];if(i&&i.type=="text")this._emit("textDelta",a,i.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=p(this,fe,"f")){if(p(this,oe,"f"))switch(p(this,oe,"f").type){case"text":this._emit("textDone",p(this,oe,"f").text,p(this,K,"f"));break;case"image_file":this._emit("imageFileDone",p(this,oe,"f").image_file,p(this,K,"f"));break}W(this,fe,r.index,"f")}W(this,oe,t.content[r.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(p(this,fe,"f")!==void 0){const r=e.data.content[p(this,fe,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,p(this,K,"f"));break;case"text":this._emit("textDone",r.text,p(this,K,"f"));break}}p(this,K,"f")&&this._emit("messageDone",e.data),W(this,K,void 0,"f")}},ws=function(e){const t=p(this,M,"m",bs).call(this,e);switch(W(this,Ne,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of s.step_details.tool_calls)a.index==p(this,Ye,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(p(this,q,"f")&&this._emit("toolCallDone",p(this,q,"f")),W(this,Ye,a.index,"f"),W(this,q,t.step_details.tool_calls[a.index],"f"),p(this,q,"f")&&this._emit("toolCallCreated",p(this,q,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":W(this,Ne,void 0,"f"),e.data.step_details.type=="tool_calls"&&p(this,q,"f")&&(this._emit("toolCallDone",p(this,q,"f")),W(this,q,void 0,"f")),this._emit("runStepDone",e.data,t);break}},_s=function(e){p(this,$t,"f").push(e),this._emit("event",e)},bs=function(e){switch(e.event){case"thread.run.step.created":return p(this,ee,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=p(this,ee,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const r=Q.accumulateDelta(t,s.delta);p(this,ee,"f")[e.data.id]=r}return p(this,ee,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":p(this,ee,"f")[e.data.id]=e.data;break}if(p(this,ee,"f")[e.data.id])return p(this,ee,"f")[e.data.id];throw new Error("No snapshot available")},xs=function(e,t){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const a of r.delta.content)if(a.index in t.content){let i=t.content[a.index];t.content[a.index]=p(this,M,"m",Cs).call(this,a,i)}else t.content[a.index]=a,s.push(a);return[t,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Cs=function(e,t){return Q.accumulateDelta(t,e)},Ss=function(e){switch(W(this,Ke,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":W(this,le,e.data,"f"),p(this,q,"f")&&(this._emit("toolCallDone",p(this,q,"f")),W(this,q,void 0,"f"));break}};class Bt extends x{create(e,t,s){return this._client.post(`/threads/${e}/messages`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}retrieve(e,t,s){return this._client.get(`/threads/${e}/messages/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}update(e,t,s,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:s,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},s){return H(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,Ut,{query:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}del(e,t,s){return this._client.delete(`/threads/${e}/messages/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}}class Ut extends X{}Bt.MessagesPage=Ut;class Ht extends x{retrieve(e,t,s,r={},a){return H(r)?this.retrieve(e,t,s,{},r):this._client.get(`/threads/${e}/runs/${t}/steps/${s}`,{query:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a?.headers}})}list(e,t,s={},r){return H(s)?this.list(e,t,{},s):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,Vt,{query:s,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class Vt extends X{}Ht.RunStepsPage=Vt;class Fe extends x{constructor(){super(...arguments),this.steps=new Ht(this._client)}create(e,t,s){const{include:r,...a}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:r},body:a,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers},stream:t.stream??!1})}retrieve(e,t,s){return this._client.get(`/threads/${e}/runs/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}update(e,t,s,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:s,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},s){return H(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,Wt,{query:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}cancel(e,t,s){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}async createAndPoll(e,t,s){const r=await this.create(e,t,s);return await this.poll(e,r.id,s)}createAndStream(e,t,s){return Q.createAssistantStream(e,this._client.beta.threads.runs,t,s)}async poll(e,t,s){const r={...s?.headers,"X-Stainless-Poll-Helper":"true"};for(s?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=s.pollIntervalMs.toString());;){const{data:a,response:i}=await this.retrieve(e,t,{...s,headers:{...s?.headers,...r}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(s?.pollIntervalMs)o=s.pollIntervalMs;else{const u=i.headers.get("openai-poll-after-ms");if(u){const d=parseInt(u);isNaN(d)||(o=d)}}await $e(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,s){return Q.createAssistantStream(e,this._client.beta.threads.runs,t,s)}submitToolOutputs(e,t,s,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:s,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:s.stream??!1})}async submitToolOutputsAndPoll(e,t,s,r){const a=await this.submitToolOutputs(e,t,s,r);return await this.poll(e,a.id,r)}submitToolOutputsStream(e,t,s,r){return Q.createToolAssistantStream(e,t,this._client.beta.threads.runs,s,r)}}class Wt extends X{}Fe.RunsPage=Wt;Fe.Steps=Ht;Fe.RunStepsPage=Vt;class we extends x{constructor(){super(...arguments),this.runs=new Fe(this._client),this.messages=new Bt(this._client)}create(e={},t){return H(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,s){return this._client.post(`/threads/${e}`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const s=await this.createAndRun(e,t);return await this.runs.poll(s.thread_id,s.id,t)}createAndRunStream(e,t){return Q.createThreadAssistantStream(e,this._client.beta.threads,t)}}we.Runs=Fe;we.RunsPage=Wt;we.Messages=Bt;we.MessagesPage=Ut;const sa=async n=>{const e=await Promise.allSettled(n),t=e.filter(r=>r.status==="rejected");if(t.length){for(const r of t)console.error(r.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const s=[];for(const r of e)r.status==="fulfilled"&&s.push(r.value);return s};let Jt=class extends x{create(e,t,s){return this._client.post(`/vector_stores/${e}/files`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}retrieve(e,t,s){return this._client.get(`/vector_stores/${e}/files/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}list(e,t={},s){return H(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,lt,{query:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}del(e,t,s){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}async createAndPoll(e,t,s){const r=await this.create(e,t,s);return await this.poll(e,r.id,s)}async poll(e,t,s){const r={...s?.headers,"X-Stainless-Poll-Helper":"true"};for(s?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=s.pollIntervalMs.toString());;){const a=await this.retrieve(e,t,{...s,headers:r}).withResponse(),i=a.data;switch(i.status){case"in_progress":let o=5e3;if(s?.pollIntervalMs)o=s.pollIntervalMs;else{const u=a.response.headers.get("openai-poll-after-ms");if(u){const d=parseInt(u);isNaN(d)||(o=d)}}await $e(o);break;case"failed":case"completed":return i}}}async upload(e,t,s){const r=await this._client.files.create({file:t,purpose:"assistants"},s);return this.create(e,{file_id:r.id},s)}async uploadAndPoll(e,t,s){const r=await this.upload(e,t,s);return await this.poll(e,r.id,s)}};class lt extends X{}Jt.VectorStoreFilesPage=lt;class kn extends x{create(e,t,s){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}retrieve(e,t,s){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}cancel(e,t,s){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}async createAndPoll(e,t,s){const r=await this.create(e,t);return await this.poll(e,r.id,s)}listFiles(e,t,s={},r){return H(s)?this.listFiles(e,t,{},s):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,lt,{query:s,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async poll(e,t,s){const r={...s?.headers,"X-Stainless-Poll-Helper":"true"};for(s?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=s.pollIntervalMs.toString());;){const{data:a,response:i}=await this.retrieve(e,t,{...s,headers:r}).withResponse();switch(a.status){case"in_progress":let o=5e3;if(s?.pollIntervalMs)o=s.pollIntervalMs;else{const u=i.headers.get("openai-poll-after-ms");if(u){const d=parseInt(u);isNaN(d)||(o=d)}}await $e(o);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:s=[]},r){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=r?.maxConcurrency??5,i=Math.min(a,t.length),o=this._client,u=t.values(),d=[...s];async function y(f){for(let h of f){const w=await o.files.create({file:h,purpose:"assistants"},r);d.push(w.id)}}const c=Array(i).fill(u).map(y);return await sa(c),await this.createAndPoll(e,{file_ids:d})}}class _e extends x{constructor(){super(...arguments),this.files=new Jt(this._client),this.fileBatches=new kn(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,s){return this._client.post(`/vector_stores/${e}`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}list(e={},t){return H(e)?this.list({},e):this._client.getAPIList("/vector_stores",qt,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class qt extends X{}_e.VectorStoresPage=qt;_e.Files=Jt;_e.VectorStoreFilesPage=lt;_e.FileBatches=kn;class ae extends x{constructor(){super(...arguments),this.realtime=new Dt(this._client),this.vectorStores=new _e(this._client),this.chat=new Ot(this._client),this.assistants=new Tt(this._client),this.threads=new we(this._client)}}ae.Realtime=Dt;ae.VectorStores=_e;ae.VectorStoresPage=qt;ae.Assistants=Tt;ae.AssistantsPage=Mt;ae.Threads=we;class jn extends x{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class Fn extends x{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}class Xt extends x{create(e,t){return this._client.post("/files",ye({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return H(e)?this.list({},e):this._client.getAPIList("/files",Gt,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t?.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:s=30*60*1e3}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let i=await this.retrieve(e);for(;!i.status||!r.has(i.status);)if(await $e(t),i=await this.retrieve(e),Date.now()-a>s)throw new kt({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return i}}class Gt extends X{}Xt.FileObjectsPage=Gt;class Kt extends x{list(e,t={},s){return H(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,zt,{query:t,...s})}}class zt extends X{}Kt.FineTuningJobCheckpointsPage=zt;class be extends x{constructor(){super(...arguments),this.checkpoints=new Kt(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return H(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Qt,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},s){return H(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Zt,{query:t,...s})}}class Qt extends X{}class Zt extends X{}be.FineTuningJobsPage=Qt;be.FineTuningJobEventsPage=Zt;be.Checkpoints=Kt;be.FineTuningJobCheckpointsPage=zt;class Te extends x{constructor(){super(...arguments),this.jobs=new be(this._client)}}Te.Jobs=be;Te.FineTuningJobsPage=Qt;Te.FineTuningJobEventsPage=Zt;class Tn extends x{createVariation(e,t){return this._client.post("/images/variations",ye({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",ye({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class Yt extends x{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",es,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class es extends Vr{}Yt.ModelsPage=es;class Mn extends x{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class Ln extends x{create(e,t,s){return this._client.post(`/uploads/${e}/parts`,ye({body:t,...s}))}}class ts extends x{constructor(){super(...arguments),this.parts=new Ln(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,s){return this._client.post(`/uploads/${e}/complete`,{body:t,...s})}}ts.Parts=Ln;var Dn;class b extends Ir{constructor({baseURL:e=De("OPENAI_BASE_URL"),apiKey:t=De("OPENAI_API_KEY"),organization:s=De("OPENAI_ORG_ID")??null,project:r=De("OPENAI_PROJECT_ID")??null,...a}={}){if(t===void 0)throw new _("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const i={apiKey:t,organization:s,project:r,...a,baseURL:e||"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&Ur())throw new _(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new jn(this),this.chat=new ot(this),this.embeddings=new Fn(this),this.files=new Xt(this),this.images=new Tn(this),this.audio=new ke(this),this.moderations=new Mn(this),this.models=new Yt(this),this.fineTuning=new Te(this),this.beta=new ae(this),this.batches=new jt(this),this.uploads=new ts(this),this._options=i,this.apiKey=t,this.organization=s,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return hr(e,{arrayFormat:"brackets"})}}Dn=b;b.OpenAI=Dn;b.DEFAULT_TIMEOUT=6e5;b.OpenAIError=_;b.APIError=L;b.APIConnectionError=tt;b.APIConnectionTimeoutError=kt;b.APIUserAbortError=z;b.NotFoundError=Hs;b.ConflictError=Vs;b.RateLimitError=Js;b.BadRequestError=Ds;b.AuthenticationError=Bs;b.InternalServerError=qs;b.PermissionDeniedError=Us;b.UnprocessableEntityError=Ws;b.toFile=Zs;b.fileFromPath=Ms;b.Completions=jn;b.Chat=ot;b.ChatCompletionsPage=it;b.Embeddings=Fn;b.Files=Xt;b.FileObjectsPage=Gt;b.Images=Tn;b.Audio=ke;b.Moderations=Mn;b.Models=Yt;b.ModelsPage=es;b.FineTuning=Te;b.Beta=ae;b.Batches=jt;b.BatchesPage=Ft;b.Uploads=ts;const vs=null;function na({onClose:n}){const[e,t]=P.useState(!0),[s,r]=P.useState(""),[a,i]=P.useState(""),[o,u]=P.useState(null),[d,y]=P.useState(!1),c=async f=>{f.preventDefault()};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6 relative",children:[l.jsx("button",{onClick:n,className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600",children:l.jsx(Hn,{className:"w-5 h-5"})}),l.jsxs("div",{className:"text-center mb-6",children:[e?l.jsx(Vn,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}):l.jsx(Wn,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e?"Welcome back":"Create an account"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e?"Sign in to save your progress":"Sign up to track your learning journey"})]}),l.jsxs("form",{onSubmit:c,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),l.jsx("input",{id:"email",type:"email",value:s,onChange:f=>r(f.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),l.jsx("input",{id:"password",type:"password",value:a,onChange:f=>i(f.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:!0})]}),o&&l.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-md",children:o}),l.jsx("button",{type:"submit",disabled:d,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Please wait...":e?"Sign In":"Sign Up"}),l.jsx("div",{className:"text-center",children:l.jsx("button",{type:"button",onClick:()=>t(!e),className:"text-sm text-blue-600 hover:text-blue-500",children:e?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})})}console.log("API KEY:",void 0);const xe=new b({apiKey:"",dangerouslyAllowBrowser:!0});console.warn("OpenAI API key is not set. Please check your environment variables.");function ra({vocabulary:n}){return l.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-lg mb-6 sm:mb-8",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(Gn,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),l.jsx("h3",{className:"text-lg sm:text-xl font-semibold",children:"Vocabulary Overview"})]}),l.jsx("div",{className:"divide-y divide-gray-100",children:n.map((e,t)=>l.jsx("div",{className:"py-3 sm:py-4",children:l.jsx("div",{className:"flex justify-between items-start",children:l.jsxs("div",{className:"space-y-1",children:[l.jsx("h4",{className:"text-base sm:text-lg font-medium text-gray-900",children:e.word}),l.jsx("p",{className:"text-sm sm:text-base text-gray-500 italic",children:e.example_sentence})]})})},t))})]})}function As({exercise:n,onNext:e}){const[t,s]=P.useState(null),[r,a]=P.useState(!1),[i,o]=P.useState(""),u=t===n.correct_answer||i.toLowerCase()===n.correct_answer.toLowerCase(),d=c=>{r||(s(c),a(!0))},y=c=>{c.preventDefault(),r||a(!0)};return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-4",children:n.question}),n.type==="multiple-choice"&&n.options&&l.jsx("div",{className:"space-y-2 sm:space-y-3",children:n.options.map((c,f)=>l.jsx("button",{onClick:()=>d(c),disabled:r,className:`w-full text-left p-3 rounded-lg border transition-colors ${t===c?u?"bg-green-50 border-green-500":"bg-red-50 border-red-500":"border-gray-300 hover:border-blue-500"} ${r?"cursor-default":"hover:bg-gray-50"} text-sm sm:text-base`,type:"button",children:l.jsxs("div",{className:"flex items-center",children:[t===c&&(u?l.jsx(Kn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-500 mr-2 flex-shrink-0"}):l.jsx(zn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-500 mr-2 flex-shrink-0"})),c]})},f))}),(n.type==="fill-in-the-blank"||n.type==="translation")&&l.jsxs("form",{onSubmit:y,className:"space-y-3 sm:space-y-4",children:[l.jsx("input",{type:"text",value:i,onChange:c=>o(c.target.value),disabled:r,className:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:text-gray-500",placeholder:"Type your answer here...",autoComplete:"off",spellCheck:"false"}),!r&&l.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-sm sm:text-base bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Check Answer"})]}),r&&l.jsxs("div",{className:`mt-4 p-3 sm:p-4 rounded-lg ${u?"bg-green-50":"bg-red-50"}`,children:[l.jsx("p",{className:"text-sm sm:text-base text-gray-800 mb-4",children:n.explanation}),l.jsx("button",{onClick:e,className:"w-full sm:w-auto px-4 py-2 text-sm sm:text-base bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Next Exercise"})]})]})}function aa({response:n}){const[e,t]=P.useState(0),[s,r]=P.useState(0),[a,i]=P.useState(0),[o,u]=P.useState("vocabulary"),d=n.lesson.vocabulary[e],y=d.exercises[s],c=n.lesson.grammar.exercises[a],f=()=>{s<d.exercises.length-1?r(w=>w+1):e<n.lesson.vocabulary.length-1&&(t(w=>w+1),r(0))},h=()=>{a<n.lesson.grammar.exercises.length-1&&i(w=>w+1)};return l.jsxs("div",{className:"mt-6 sm:mt-8 space-y-6 sm:space-y-8",children:[l.jsxs("section",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-lg",children:[l.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-3 sm:mb-4",children:n.lesson.title}),l.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:n.lesson.overview})]}),l.jsx(ra,{vocabulary:n.lesson.vocabulary}),l.jsxs("div",{className:"flex border-b border-gray-200 overflow-x-auto",children:[l.jsx("button",{onClick:()=>u("vocabulary"),className:`px-3 sm:px-4 py-2 text-sm sm:text-base font-medium whitespace-nowrap ${o==="vocabulary"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Practice Vocabulary"}),l.jsx("button",{onClick:()=>u("grammar"),className:`px-3 sm:px-4 py-2 text-sm sm:text-base font-medium whitespace-nowrap ${o==="grammar"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Practice Grammar"})]}),o==="vocabulary"?l.jsxs("section",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-lg",children:[l.jsxs("div",{className:"mb-4 sm:mb-6",children:[l.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-2",children:d.word}),l.jsx("p",{className:"text-sm sm:text-base text-gray-600 italic",children:d.example_sentence})]}),l.jsx("div",{className:"mt-4 sm:mt-6",children:l.jsx(As,{exercise:y,onNext:f})})]}):l.jsxs("section",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-lg",children:[l.jsxs("div",{className:"mb-4 sm:mb-6",children:[l.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-2",children:n.lesson.grammar.topic}),l.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:n.lesson.grammar.explanation})]}),l.jsx("div",{className:"mt-4 sm:mt-6",children:l.jsx(As,{exercise:c,onNext:h})})]})]})}function ia(){const[n,e]=P.useState({targetLanguage:"",proficiencyLevel:"",interests:""}),[t,s]=P.useState(!1),[r,a]=P.useState(null),[i,o]=P.useState(null),[u,d]=P.useState(!1);P.useState(null),P.useEffect(()=>{},[]);const y=async f=>{f.preventDefault(),s(!0),o(null);try{const h=await xe.beta.threads.create();await xe.beta.threads.messages.create(h.id,{role:"user",content:`Create a personalized language learning plan for a ${n.proficiencyLevel} level student learning ${n.targetLanguage}. They are interested in ${n.interests}.`});const w=await xe.beta.threads.runs.create(h.id,{assistant_id:"asst_mwBvVrwED3NhTkh8NqZDFXBH"});let m;do await new Promise(S=>setTimeout(S,1e3)),m=await xe.beta.threads.runs.retrieve(h.id,w.id);while(m.status==="in_progress"||m.status==="queued");if(m.status==="completed"){const A=(await xe.beta.threads.messages.list(h.id)).data[0];if(A.content[0].type==="text"){const g=JSON.parse(A.content[0].text.value);a(g)}}else throw new Error(`Run failed with status: ${m.status}`)}catch(h){console.error("Error:",h),o(h instanceof Error?h.message:"An error occurred")}finally{s(!1)}},c=f=>{e(h=>({...h,[f.target.name]:f.target.value}))};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#007CF0]/5 via-white to-[#00DFD8]/5 pb-6 sm:pb-12",children:l.jsxs("div",{className:"max-w-4xl mx-auto pt-8 sm:pt-16 px-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 sm:mb-12",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("a",{href:"https://www.hellofluentai.com",target:"_blank",rel:"noopener noreferrer",className:"inline-block",children:l.jsxs("svg",{width:"280",height:"52",viewBox:"0 0 419 77",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"transform hover:scale-105 transition-transform duration-300",children:[l.jsx("path",{d:"M15.877 76H0.984375V4.61328H41.9023V17.0156H15.877V35.4238H40.0957V47.7773H15.877V76ZM71.5879 76H56.6953V0.0234375H71.5879V76ZM139.359 21.4102V76H127.934L125.932 69.0176H125.15C123.979 70.873 122.514 72.3867 120.756 73.5586C118.998 74.7305 117.061 75.5931 114.945 76.1465C112.829 76.6999 110.632 76.9766 108.354 76.9766C104.447 76.9766 101.046 76.293 98.1484 74.9258C95.2513 73.526 92.9889 71.3613 91.3613 68.4316C89.7663 65.502 88.9688 61.6934 88.9688 57.0059V21.4102H103.861V53.2949C103.861 57.2012 104.561 60.1471 105.961 62.1328C107.361 64.1185 109.59 65.1113 112.65 65.1113C115.678 65.1113 118.054 64.4277 119.779 63.0605C121.505 61.6608 122.709 59.6263 123.393 56.957C124.109 54.2552 124.467 50.9674 124.467 47.0938V21.4102H139.359ZM179.494 20.3848C184.54 20.3848 188.885 21.3613 192.531 23.3145C196.177 25.235 198.993 28.0345 200.979 31.7129C202.964 35.3913 203.957 39.8835 203.957 45.1895V52.416H168.752C168.915 56.6152 170.168 59.9193 172.512 62.3281C174.888 64.7044 178.176 65.8926 182.375 65.8926C185.858 65.8926 189.048 65.5345 191.945 64.8184C194.842 64.1022 197.821 63.028 200.881 61.5957V73.1191C198.179 74.4538 195.347 75.4303 192.385 76.0488C189.455 76.6673 185.891 76.9766 181.691 76.9766C176.223 76.9766 171.372 75.9674 167.141 73.9492C162.941 71.931 159.637 68.8548 157.229 64.7207C154.852 60.5866 153.664 55.3783 153.664 49.0957C153.664 42.7155 154.738 37.4095 156.887 33.1777C159.068 28.9134 162.095 25.7233 165.969 23.6074C169.842 21.459 174.351 20.3848 179.494 20.3848ZM179.592 30.9805C176.695 30.9805 174.286 31.9082 172.365 33.7637C170.477 35.6191 169.387 38.5326 169.094 42.5039H189.992C189.96 40.2904 189.553 38.321 188.771 36.5957C188.023 34.8704 186.883 33.5033 185.354 32.4941C183.856 31.485 181.936 30.9805 179.592 30.9805ZM249.072 20.3848C254.899 20.3848 259.587 21.9798 263.135 25.1699C266.683 28.3275 268.457 33.4056 268.457 40.4043V76H253.564V44.1152C253.564 40.209 252.848 37.263 251.416 35.2773C250.016 33.2917 247.803 32.2988 244.775 32.2988C240.218 32.2988 237.109 33.8451 235.449 36.9375C233.789 40.0299 232.959 44.4896 232.959 50.3164V76H218.066V21.4102H229.443L231.445 28.3926H232.275C233.447 26.5046 234.896 24.9746 236.621 23.8027C238.379 22.6309 240.316 21.7682 242.432 21.2148C244.58 20.6615 246.794 20.3848 249.072 20.3848ZM308.787 65.1113C310.415 65.1113 311.993 64.9486 313.523 64.623C315.086 64.2975 316.632 63.8906 318.162 63.4023V74.4863C316.567 75.2025 314.581 75.7884 312.205 76.2441C309.861 76.7324 307.29 76.9766 304.49 76.9766C301.235 76.9766 298.305 76.4557 295.701 75.4141C293.13 74.3398 291.095 72.5007 289.598 69.8965C288.133 67.2598 287.4 63.5977 287.4 58.9102V32.5918H280.271V26.293L288.475 21.3125L292.771 9.78906H302.293V21.4102H317.576V32.5918H302.293V58.9102C302.293 60.9935 302.879 62.556 304.051 63.5977C305.255 64.6068 306.834 65.1113 308.787 65.1113ZM376.119 76L370.943 59.0078H344.918L339.742 76H323.434L348.629 4.32031H367.135L392.428 76H376.119ZM367.33 46.3125L362.154 29.7109C361.829 28.6042 361.389 27.1882 360.836 25.4629C360.315 23.7051 359.778 21.931 359.225 20.1406C358.704 18.3177 358.281 16.7389 357.955 15.4043C357.63 16.7389 357.174 18.3991 356.588 20.3848C356.035 22.3379 355.497 24.1934 354.977 25.9512C354.456 27.709 354.081 28.9622 353.854 29.7109L348.727 46.3125H367.33ZM403.461 76V4.61328H418.598V76H403.461Z",fill:"url(#paint0_linear_129_101)"}),l.jsx("defs",{children:l.jsxs("linearGradient",{id:"paint0_linear_129_101",x1:"-15.7607",y1:"25.518",x2:"435.894",y2:"25.518",gradientUnits:"userSpaceOnUse",children:[l.jsx("stop",{stopColor:"#007CF0"}),l.jsx("stop",{offset:"1",stopColor:"#00DFD8"})]})})]})})}),l.jsx("p",{className:"text-sm sm:text-lg text-gray-600 text-center mt-4",children:"Get personalized language lessons tailored to your needs"})]}),l.jsx("div",{className:"flex items-center gap-2",children:vs})]}),l.jsxs("form",{onSubmit:y,className:"space-y-4 sm:space-y-6 bg-white p-4 sm:p-8 rounded-xl shadow-lg",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-4 p-3 sm:p-4 bg-blue-50 rounded-lg",children:[l.jsx(Jn,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 w-full",children:[l.jsx("label",{htmlFor:"targetLanguage",className:"block text-sm font-medium text-gray-700 mb-1",children:"Which language do you want to learn?"}),l.jsx("input",{type:"text",id:"targetLanguage",name:"targetLanguage",value:n.targetLanguage,onChange:c,className:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Spanish, French, Japanese",required:!0})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-4 p-3 sm:p-4 bg-green-50 rounded-lg",children:[l.jsx(qn,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 w-full",children:[l.jsx("label",{htmlFor:"proficiencyLevel",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your current proficiency level"}),l.jsxs("select",{id:"proficiencyLevel",name:"proficiencyLevel",value:n.proficiencyLevel,onChange:c,className:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0,children:[l.jsx("option",{value:"",children:"Select your level"}),l.jsx("option",{value:"beginner",children:"Beginner"}),l.jsx("option",{value:"intermediate",children:"Intermediate"}),l.jsx("option",{value:"advanced",children:"Advanced"})]})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-4 p-3 sm:p-4 bg-purple-50 rounded-lg",children:[l.jsx(Xn,{className:"w-5 h-5 sm:w-6 sm:h-6 text-purple-600 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 w-full",children:[l.jsx("label",{htmlFor:"interests",className:"block text-sm font-medium text-gray-700 mb-1",children:"Topics of interest"}),l.jsx("input",{type:"text",id:"interests",name:"interests",value:n.interests,onChange:c,className:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"e.g., business, travel, culture, music",required:!0})]})]})]}),i&&l.jsx("div",{className:"p-3 sm:p-4 bg-red-50 text-red-700 rounded-lg text-sm sm:text-base",children:i}),l.jsx("button",{type:"submit",disabled:t,className:"w-full py-2 sm:py-3 px-4 text-sm sm:text-base border border-transparent rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Generating your plan...":"Generate Learning Plan"})]}),r&&l.jsx(aa,{response:r}),u&&vs&&l.jsx(na,{onClose:()=>d(!1)})]})})}Rs(document.getElementById("root")).render(l.jsx(P.StrictMode,{children:l.jsx(ia,{})}));
